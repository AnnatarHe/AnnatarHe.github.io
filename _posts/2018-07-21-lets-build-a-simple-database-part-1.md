---
layout: post
title: 译 - 构建最简数据库 一
tags: code db c
---

## 第一部分 介绍并设置 REPL

作为开发者，在我的工作经历中我经常用关系型数据库，然而它们对我来说是个黑盒。所以我有一些问题：

* 数据存储是以什么样的形式？（内存和硬盘上）
* 什么时候要把数据从内存保存到硬盘上？
* 为什么一张表里只能由一个主键(Primary key)
* 事务是如何回滚的？
* 索引是什么格式的？
* 全表查询会在什么时候触发，如何执行？
* 一个准备句柄(prepared statement)是以什么样的格式存储的？

换而言之，数据库是如何**工作**的？

为了搞懂这些，我写了一个极简数据库。我以 sqlite 为标准，因为它设计得很小巧，而且也比 MySQL 和 PostgreSQL 的功能更少，这样我就可以比较容易去理解它了。整个数据库存储在一个单文件中。

### Sqlite