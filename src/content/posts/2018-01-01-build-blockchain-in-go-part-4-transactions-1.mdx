---
title: ç”¨ golang å®ç°åŒºå—é“¾ç³»åˆ—å›› | äº¤æ˜“ 1
tags: blockchain code
date: 2018-01-01
draft: false
---

> åŸæ–‡é“¾æ¥ï¼š [Building Blockchain in Go. Part 4: Transactions 1](https://jeiwan.cc/posts/building-blockchain-in-go-part-4/)

## ä»‹ç»

äº¤æ˜“æ˜¯æ¯”ç‰¹å¸çš„æ ¸å¿ƒï¼Œè€Œä¸”åŒºå—é“¾çš„å”¯ä¸€ç›®æ ‡å°±æ˜¯å®‰å…¨å¯é åœ°å­˜å‚¨äº¤æ˜“ä¿¡æ¯ï¼Œè€Œä¸”æ²¡äººå¯ä»¥åœ¨å®ƒä»¬è¢«åˆ›å»ºä¹‹åä¿®æ”¹å®ƒä»¬ã€‚ä»Šå¤©æˆ‘ä»¬è¦å¼€å§‹å®ç°äº¤æ˜“ã€‚ä½†æ˜¯ç”±äºè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„è¯é¢˜ï¼Œå› æ­¤æˆ‘ä¼šåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šè¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šå®ç°äº¤æ˜“çš„é€šç”¨æœºåˆ¶ï¼Œåœ¨ç¬¬äºŒéƒ¨åˆ†ä¼šç»§ç»­å®Œæˆç»†èŠ‚éƒ¨åˆ†ã€‚

ç”±äºä»£ç å˜åŒ–ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å…¨éƒ¨éƒ½è§£é‡Šä¸€ä¸‹ï¼Œä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/Jeiwan/blockchain_go/compare/part_3...part_4#files_bucket)æ‰¾åˆ°æ‰€æœ‰çš„å˜åŒ–ã€‚

## æ²¡æœ‰å‹ºå­

å¦‚æœä½ æ›¾ç»åšä¸ª web åº”ç”¨ï¼Œä¸ºäº†å®ç°æ”¯ä»˜ç³»ç»Ÿï¼Œå¯èƒ½ä¼šåœ¨æ•°æ®åº“é‡Œåˆ›é€ è¿™ä¹ˆå‡ ä¸ªè¡¨ï¼š **accounts** å’Œ **transactions**ã€‚è´¦æˆ·è¡¨ä¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸ªäººä¿¡æ¯å’Œä½™é¢ï¼Œå¦ä¸€ä¸ªäº¤æ˜“æ ‡ä¼šå­˜å•†å“ä¸­å…³äºé’±ä»å“ªä¸ªè´¦æˆ·è½¬ç»™å¦ä¸€ä¸ªè´¦æˆ·çš„ä¿¡æ¯ã€‚æ¯”ç‰¹å¸ä¸­ï¼Œæ”¯ä»˜å®Œå®Œå…¨å…¨æ˜¯å¦ä¸€ç§æ–¹å¼ã€‚è¿™é‡Œï¼š

1. æ²¡æœ‰è´¦æˆ·
2. æ²¡æœ‰ä½™é¢
3. æ²¡æœ‰åœ°å€
4. æ²¡æœ‰å¸
5. æ²¡æœ‰å‘é€è€…å’Œæ¥å—è€…

å› ä¸ºåŒºå—é“¾æ˜¯ä¸€ä¸ªå…¬å…±çš„ï¼Œå¼€æ”¾çš„æ•°æ®åº“ï¼Œæˆ‘ä»¬ä¸ä¼šæƒ³å»å­˜ä¸€äº›å…³äºæ˜¯è°çš„é’±åŒ…çš„è¿™ç§æ•æ„Ÿä¿¡æ¯ã€‚é’±ä¸ä¼šå­˜åœ¨è´¦æˆ·é‡Œã€‚äº¤æ˜“å¹¶ä¸ä¼šæŠŠé’±ä»ä¸€ä¸ªåœ°å€è½¬åˆ°å¦ä¸€ä¸ªåœ°å€é‡Œã€‚ä¹Ÿæ²¡æœ‰å­—æ®µæˆ–è€…å±æ€§å»æ ‡è®°è´¦æˆ·ä½™é¢ã€‚è¿™é‡Œåªæœ‰äº¤æ˜“ã€‚é‚£ä¹ˆäº¤æ˜“çš„å†…åœ¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

## æ¯”ç‰¹å¸çš„äº¤æ˜“

ä¸€ç¬”äº¤æ˜“å°±æ˜¯å…¥è´¦å’Œå‡ºè´¦çš„ç»“åˆï¼š

```go
type Transaction struct {
    ID   []byte
    Vin  []TXInput
    Vout []TXOutput
}
```

ä¸€ç¬”æ–°çš„äº¤æ˜“å…¥è´¦ä¾èµ–äºä¸Šæ¬¡äº¤æ˜“çš„å‡ºè´¦(è¿™é‡Œå…¶å®æœ‰ä¸ªä¾‹å¤–ï¼Œæˆ‘ä»¬ä¸€ä¼šå„¿å†è°ˆ)ã€‚å‡ºè´¦å°±æ˜¯é’±åˆ°åº•å­˜åœ¨å“ªé‡Œã€‚ä¸‹é¢çš„ç¤ºæ„å›¾æ¼”ç¤ºäº†äº¤æ˜“çš„å†…åœ¨è”ç³»ï¼š

![transactions diagram](https://jeiwan.cc/images/transactions-diagram.png)

 æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š

 1. æœ‰å‡ºè´¦å¹¶éå’Œå…¥è´¦ç›¸è¿ã€‚
 2. ä¸€æ¬¡äº¤æ˜“ä¸­ï¼Œå…¥è´¦å¯ä»¥å‚è€ƒå¤šç¬”äº¤æ˜“çš„å‡ºè´¦ã€‚
 3. ä¸€ä¸ªå…¥è´¦å¿…é¡»ä¾èµ–äºä¸€ç¬”å‡ºè´¦ã€‚

æ¦‚è§ˆæ•´ç¯‡æ–‡ç« ã€‚æˆ‘ä»¬ç”¨äº†ç±»ä¼¼äºè¿™æ ·çš„è¯ "é’±", "å¸"ï¼Œ"èŠ±", "å‘", "è´¦æˆ·"ï¼Œç­‰ã€‚ä½†ä»ç„¶å¯¹æ¯”ç‰¹å¸æ²¡æœ‰æ¦‚å¿µã€‚äº¤æ˜“åªæ˜¯ç”¨åªèƒ½è¢«é”å®šå®ƒå¯¹çš„äººè§£é”çš„è„šæœ¬é”å®šçš„ä¸€äº›å€¼ï¼Œ

## äº¤æ˜“å‡ºè´¦

å…ˆçœ‹ä¸€çœ¼å‡ºè´¦çš„æ•°æ®ç»“æ„ï¼š

```go
type TXOutput struct {
    Value        int
    ScriptPubKey string
}
```

äº‹å®ä¸Šï¼Œè¿™æ˜¯å­˜å‚¨ "å¸(coins)" çš„å‡ºè´¦(æ³¨æ„ä¸€ä¸‹ä¸Šé¢çš„ **Value** å­—æ®µ)ã€‚è€Œä¸”ï¼Œå­˜å‚¨æ„å‘³ç€è¿·ä¸€æ ·çš„é”ä½ï¼Œæ‰€åœ¨ **ScriptPubKey** é‡Œã€‚æ·±å…¥å…¶ä¸­çš„è¯ï¼Œæ¯”ç‰¹å¸ä½¿ç”¨äº†ä¸€ç§å«åš *Script* çš„è„šæœ¬è¯­è¨€ï¼Œå®ƒä¸€èˆ¬è¢«ç”¨æ¥å®šä¹‰å‡ºè´¦çš„é”å®šå’Œè§£é”é€»è¾‘ã€‚è¿™ç§è¯­è¨€ååˆ†çš„åŸå§‹(æ˜¯æ•…æ„è¿™ä¹ˆåšçš„ï¼Œä¸ºäº†é¿å…å¯èƒ½å­˜åœ¨çš„å…¥ä¾µå’Œæ»¥ç”¨)ï¼Œä½†æˆ‘ä»¬ä¸ä¼šåœ¨ç»†èŠ‚ä¸Šå»è®¨è®ºå®ƒã€‚ä½ å¯ä»¥åœ¨ [è¿™é‡Œ](https://en.bitcoin.it/wiki/Script)æ‰¾åˆ°å…³äºå®ƒçš„ç»†èŠ‚è§£é‡Šã€‚

> æ¯”ç‰¹å¸ä¸­ï¼Œ*value* å­—æ®µå­˜å‚¨ç€ *satoshis* çš„æ•°é‡ï¼Œå¹¶ä¸æ˜¯æ¯”ç‰¹å¸çš„æ•°é‡ã€‚ä¸€ä¸ª *satoshi* æ˜¯ä¸€äº¿ä¸ªæ¯”ç‰¹å¸åˆ†ä¹‹ä¸€(0.00000001 BTC)ï¼Œæ‰€ä»¥è¿™æ˜¯æ¯”ç‰¹å¸è´§å¸ä¸­çš„æœ€å°å•ä½(åƒæ˜¯åˆ†)ã€‚

ç”±äºæˆ‘ä»¬å¹¶æ²¡æœ‰å®ç°åœ°å€è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬æš‚æ—¶ä¼šé¿å…æ•´ä¸ª scripting ç›¸å…³çš„é€»è¾‘ã€‚ **ScriptPubKey** å°†ä¼šå­˜å‚¨ä¸€ä¸ªä»»æ„å­—ç¬¦ä¸²(ç”¨æˆ·ç§°ä¹‹ä¸ºé’±åŒ…åœ°å€).

> é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæ‹¥æœ‰è¿™ç§è„šæœ¬åŒ–è¯­è¨€åŒæ—¶æ„å‘³ç€æ¯”ç‰¹å¸ä¹Ÿå¯ä»¥æˆä¸ºæ™ºèƒ½åˆçº¦å¹³å°

å…³äºå‡ºè´¦çš„ä¸€ä¸ªéå¸¸é‡è¦äº‹æƒ…æ˜¯ä»–ä»¬ä¸å¯å†åˆ†ï¼Œè¿™å°±æ„å‘³ç€ä½ ä¸èƒ½ç”¨å®ƒçš„ä¸€éƒ¨åˆ†ã€‚å½“ä¸€ä¸ªå‡ºè´¦è¢«æ–°çš„äº¤æ˜“æ‰€å¼•ç”¨ï¼Œå®ƒç”¨çš„å…¶å®æ˜¯æ•´ä¸ªã€‚è€Œä¸”å¦‚æœè¿™ä¸ªå€¼æ¯”æ‰€è¦æ±‚çš„è¦å¤§ï¼Œä¼šç”Ÿæˆä¸€ä¸ªé€€è´¹ï¼Œå¹¶å‘å›ç»™å‘é€è€…ã€‚è¿™å’Œç°å®ç”Ÿæ´»ä¸­çš„æƒ…å†µå¾ˆç›¸ä¼¼ã€‚å½“ä½ ä»˜æ¬¾çš„æ—¶å€™ï¼Œä½ ä¹°ä¸€ä¸ª 1 å—é’±çš„ä¸œè¥¿ï¼Œç»™äº†è€æ¿ 5 å—é’±ï¼Œé‚£ä¹ˆä½ ä¼šæ”¶åˆ° 4 å—é’±çš„æ‰¾é›¶ã€‚

## äº¤æ˜“å…¥è´¦

è¿™æ˜¯å…¥è´¦çš„æ•°æ®ç»“æ„ï¼š

```go
type TXInput struct {
    Txid      []byte
    Vout      int
    ScriptSig string
}
```

ä¹‹å‰æˆ‘ä»¬å°±æåˆ°äº†å…¥è´¦ä¼šå¼•ç”¨å‰ä¸€ä¸ªå‡ºè´¦ï¼š **Txid** å°±å­˜å‚¨ç€ä¸Šä¸€ä¸ªäº¤æ˜“çš„ IDï¼Œ**Vout** å­˜å‚¨ç€äº¤æ˜“ä¸­çš„å‡ºè´¦ç´¢å¼•ã€‚**ScriptSig** æ˜¯ä¸€ä¸ªæä¾›åœ¨å‡ºè´¦ä¸­ä½¿ç”¨çš„ **ScriptPubKey** æ•°æ®çš„è„šæœ¬ã€‚å¦‚æœæ•°æ®æ—¶æ­£ç¡®çš„ï¼Œå‡ºè´¦å¯ä»¥è¢«è§£é”ï¼Œè¿™ä¸ªå€¼ä¹Ÿå¯ä»¥è¢«ç”¨æ¥ç”Ÿæˆæ–°çš„å‡ºè´¦ï¼›å¦‚æœä¸å¯¹ï¼Œå‡ºè´¦å°±ä¸èƒ½è¢«å…¥è´¦æ‰€å¼•ç”¨ã€‚è¿™ç§æœºåˆ¶å°±ä¿éšœäº†ç”¨æˆ·ä¸èƒ½èŠ±åˆ«äººçš„é’±ã€‚

è·Ÿä¸Šé¢ä¸€æ ·ï¼Œç”±äºæˆ‘ä»¬æš‚æ—¶è¿˜æ²¡æœ‰å®ç°åœ°å€ï¼ŒScriptSig è®²å­˜å‚¨ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„é’±åŒ…åœ°å€çš„ä»»æ„å€¼ã€‚æˆ‘ä»¬ä¼šåœ¨ä¸‹ç¯‡æ–‡ç« é‡Œå®ç°å…¬é’¥å’Œç­¾åè®¤è¯ã€‚

æ¥æ€»ç»“ä¸€ä¸‹ã€‚å‡ºè´¦å°±æ˜¯ "å¸(coins)" å­˜åœ¨å“ªé‡Œã€‚æ¯ä¸ªå‡ºè´¦éƒ½å¸¦ç€ä¸€ä¸ªè§£é”è„šæœ¬ï¼Œå®ƒå†³å®šäº†è§£é”å‡ºè´¦çš„é€»è¾‘ã€‚æ¯ä¸ªæ–°çš„äº¤æ˜“éƒ½å¿…é¡»è¦æœ‰è‡³å°‘ä¸€ä¸ªå…¥è´¦å’Œå‡ºè´¦ã€‚ä¸€ä¸ªå…¥è´¦ä¼šå¼•ç”¨ä¸Šä¸ªäº¤æ˜“çš„å‡ºè´¦å’Œæ•°æ®(**ScriptSig** å­—æ®µ)è¢«ç”¨æ¥åœ¨å‡ºè´¦ä¸­è§£é”è„šæœ¬å»è§£é”å¹¶ä½¿ç”¨å…¶ä¸­çš„å€¼åˆ›å»ºæ–°çš„å‡ºè´¦ã€‚

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ˜¯å…ˆæœ‰å…¥è´¦è¿˜æ˜¯å…ˆæœ‰å‡ºè´¦ï¼Ÿ

## è›‹

åœ¨æ¯”ç‰¹å¸ä¸­ï¼Œå…ˆæœ‰è›‹ï¼Œå†æœ‰é¸¡ã€‚å…¥è´¦å¼•ç”¨å‡ºè´¦çš„é€»è¾‘æ˜¯å…¸å‹çš„ "å…ˆæœ‰è›‹è¿˜æ˜¯å…ˆæœ‰é¸¡" çš„é—®é¢˜ï¼šå…¥è´¦äº§ç”Ÿå‡ºè´¦ï¼Œå‡ºè´¦ä½¿å¾—å…¥è´¦æˆä¸ºå¯èƒ½ã€‚åœ¨æ¯”ç‰¹å¸ç§ï¼Œå‡ºè´¦å…ˆäºå…¥è´¦ã€‚

å½“ä¸€ä¸ªçŸ¿å·¥å¼€å§‹æŒ–å‘ï¼Œå®ƒå°±æ·»åŠ äº†ä¸€ä¸ª **å¸åŸºäº¤æ˜“(coinbase transaction)**ã€‚ä¸€ä¸ªå¸åŸºäº¤æ˜“æ˜¯äº¤æ˜“ä¸­çš„ç‰¹æ®Šç±»å‹ï¼Œå®ƒå¹¶ä¸éœ€è¦ä¸Šä¸ªå·²å¤„åœ¨çš„å‡ºè´¦ã€‚å®ƒåœ¨æ··æ²Œä¸­è‡ªå·±åˆ›é€ äº†ä¸€ä¸ªå‡ºè´¦(å¸)ï¼Œä¸€ä¸ªæ²¡æœ‰é¸¡çš„è›‹ã€‚è¿™æ˜¯ç»™çŸ¿å·¥æ‰¾åˆ°æ–°åŒºå—çš„æŠ¥å¿ã€‚

å°±åƒä½ çŸ¥é“çš„é‚£æ ·ï¼Œåˆ›å§‹åŒºå—åœ¨åŒºå—é“¾çš„èµ·ç‚¹ã€‚è¿™ä¸ªåŒºå—ä¹Ÿäº§ç”Ÿäº†åŒºå—é“¾ä¸­çš„ç¬¬ä¸€ç¬”å‡ºè´¦ã€‚æ²¡æœ‰å‰ç½®å‡ºè´¦çš„è¦æ±‚ï¼Œå› ä¸ºæ²¡æœ‰å‰ç½®äº¤æ˜“ï¼Œä¹Ÿæ²¡æœ‰å‡ºè´¦ã€‚

æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªå¸åŸºäº¤æ˜“å§ï¼š

```go
func NewCoinbaseTX(to, data string) *Transaction {
    if data == "" {
        data = fmt.Sprintf("Reward to '%s'", to)
    }

    txin := TXInput{[]byte{}, -1, data}
    txout := TXOutput{subsidy, to}
    tx := Transaction{nil, []TXInput{txin}, []TXOutput{txout}}
    tx.SetID()

    return &tx
}
```

ä¸€ä¸ªå¸åŸºäº¤æ˜“åªæœ‰ä¸€ä¸ªå…¥è´¦ã€‚åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼Œ **Txid** æ˜¯ç©ºçš„ï¼Œ **Vout** ä¹Ÿç­‰äº -1ã€‚è€Œä¸”ä¸€ä¸ªå¸åŸºäº¤æ˜“å¹¶ä¸åœ¨ **ScriptSig** ä¸­å­˜å‚¨è„šæœ¬ã€‚ä¸€ä¸ªä»»æ„æ•°æ®è¢«å­˜åœ¨é‚£é‡Œã€‚

> æ¯”ç‰¹å¸ä¸­ï¼Œç¬¬ä¸€æ¡å¸åŸºäº¤æ˜“ä¸­åŒ…å«ç€ä¸‹é¢è¿™æ¡ä¿¡æ¯ï¼š "2009å¹´1æœˆ3æ—¥ï¼Œè´¢æ”¿å¤§è‡£æ­£å¤„åœ¨å®æ–½ç¬¬äºŒè½®é“¶è¡Œç´§æ€¥æ´åŠ©çš„è¾¹ç¼˜"ä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://blockchain.info/tx/4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b?show_adv=true)è‡ªå·±çœ‹

**subsidy** æ˜¯å¥–åŠ±é‡‘é¢ã€‚æ¯”ç‰¹å¸ä¸­ï¼Œè¿™ä¸ªæ•°é‡ä¸å­˜åœ¨ä»»ä½•åœ°æ–¹ã€‚å®ƒåªä¼šåŸºäºåŒºå—æ€»é‡è¿›è¡Œè®¡ç®—ã€‚åŒºå—è¢«åˆ†ä¸º **210000** ä¸ªã€‚æŒ–æ˜åˆ›å§‹åŒºå—ä¼šäº§ç”Ÿ 50 BTCã€‚æ¯ **210000** ä¸ªåŒºå—è¢«å‘æ˜å‡ºï¼Œå¥–åŠ±å°±ä¼šå‡åŠã€‚åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬ä¼šå­˜ç€ä¸€ä¸ªæ’å®šçš„å¸¸é‡å¥–åŠ±å€¼(è‡³å°‘æ˜¯ç°åœ¨å•¦ ğŸ˜‰)

## åœ¨åŒºå—é“¾ä¸­ä¿å­˜äº¤æ˜“ä¿¡æ¯

åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæ¯ä¸ªåŒºå—è‡³å°‘å­˜å‚¨ä¸€ç¬”äº¤æ˜“ã€‚è€Œä¸”æ²¡å¯èƒ½ä¸å¸¦äº¤æ˜“ä¿¡æ¯å°±æŒ–å‘ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬åº”è¯¥ç§»é™¤ **Block** ä¸­çš„ **Data** å­—æ®µï¼Œå¹¶ç”¨äº¤æ˜“æ›¿ä»£ï¼š

```go
type Block struct {
    Timestamp     int64
    Transactions  []*Transaction
    PrevBlockHash []byte
    Hash          []byte
    Nonce         int
}
```

ç›¸åº”åœ°ï¼Œ**NewBlock** å’Œ **NewGenesisBlock** ä¹Ÿå¿…é¡»è·Ÿç€å˜ï¼š

```go
func NewBlock(transactions []*Transaction, prevBlockHash []byte) *Block {
    block := &Block{time.Now().Unix(), transactions, prevBlockHash, []byte{}, 0}
    ...
}

func NewGenesisBlock(coinbase *Transaction) *Block {
    return NewBlock([]*Transaction{coinbase}, []byte{})
}
```

æ¥ä¸‹æ¥è°ƒæ•´æ–°åŒºå—é“¾åˆ›å»ºçš„éƒ¨åˆ†ï¼š

```go
func CreateBlockchain(address string) *Blockchain {
    ...
    err = db.Update(func(tx *bolt.Tx) error {
        cbtx := NewCoinbaseTX(address, genesisCoinbaseData)
        genesis := NewGenesisBlock(cbtx)

        b, err := tx.CreateBucket([]byte(blocksBucket))
        err = b.Put(genesis.Hash, genesis.Serialize())
        ...
    })
    ...
}
```

ç°åœ¨ï¼Œè¿™ä¸ªå‡½æ•°å¸¦ç€ä¸€ä¸ªå°†æ¥æ”¶æŒ–æ˜åˆ›å§‹åŒºå—å¥–åŠ±çš„çš„åœ°å€äº†ã€‚

## å·¥ä½œé‡è¯æ˜

å·¥ä½œé‡è¯æ˜ç®—æ³•ä¹Ÿè¦è€ƒè™‘åˆ°åŒºå—ä¸­è¢«å­˜å…¥äº†äº¤æ˜“ã€‚ä¸ºäº†ä¿è¯å­˜å‚¨äº¤æ˜“åŒºå—é“¾çš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚æˆ‘ä»¬å¾—æ”¹ä¸€ä¸‹ **ProofOfWork.prepareData** æ–¹æ³•ï¼š

```go
func (pow *ProofOfWork) prepareData(nonce int) []byte {
    data := bytes.Join(
        [][]byte{
            pow.block.PrevBlockHash,
            pow.block.HashTransactions(), // è¿™è¡Œæ”¹äº†
            IntToHex(pow.block.Timestamp),
            IntToHex(int64(targetBits)),
            IntToHex(int64(nonce)),
        },
        []byte{},
    )

    return data
}
```

æ›¿æ¢æ‰ **pow.block.Data**, æˆ‘ä»¬ç°åœ¨ç”¨ **pow.block.HashTransactions()**ï¼š

```go
func (b *Block) HashTransactions() []byte {
    var txHashes [][]byte
    var txHash [32]byte

    for _, tx := range b.Transactions {
        txHashes = append(txHashes, tx.ID)
    }
    txHash = sha256.Sum256(bytes.Join(txHashes, []byte{}))

    return txHash[:]
}
```

å†æ¬¡å£°æ˜ï¼šæˆ‘ä»¬ä½¿ç”¨å“ˆå¸Œç®—æ³•ä½œä¸ºç”Ÿæˆç‹¬ä¸€æ— äºŒçš„æ•°æ®èº«ä»½çš„æœºåˆ¶ã€‚æˆ‘ä»¬æƒ³è¦åŒºå—ä¸Šçš„æ‰€æœ‰äº¤æ˜“éƒ½å¯ä»¥é€šè¿‡å•ä¸ªå“ˆå¸Œè€Œæœ‰ç‹¬ä¸€æ— äºŒçš„èº«ä»½ã€‚ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®æ ‡ã€‚æˆ‘ä»¬ä»æ¯ç¬”äº¤æ˜“ä¸­ç”Ÿæˆå“ˆå¸Œã€‚æŠŠå®ƒä»¬è¿æ¥èµ·æ¥ï¼Œç„¶åä»è¿™ä¸ªå·²è¿æ¥çš„æ•°æ®ä¸­ç”Ÿæˆå“ˆå¸Œã€‚

> æ¯”ç‰¹å¸ç”¨äº†æ›´åŠ ç²¾ç»†çš„æŠ€æœ¯ï¼šå®ƒç›¸å½“äºæ‰€æœ‰çš„äº¤æ˜“éƒ½å­˜åœ¨ä¸€ä¸ªåŒºå—ä¸­ï¼Œä½œä¸ºä¸€ä¸ª [Merkle tree](https://en.wikipedia.org/wiki/Merkle_tree) ç„¶åç”¨è¿™ä¸ªæ ‘çš„æ ¹å“ˆå¸Œä½œä¸ºå·¥ä½œé‡è¯æ˜ç³»ç»Ÿã€‚è¿™ç§æ–¹å¼å°±å¯ä»¥å¾ˆå¿«åœ°ç¡®è®¤åŒºå—ä¸­æœ‰æ²¡æœ‰æŸç¬”äº¤æ˜“ï¼Œåªè¦æœ‰ä¸€ä¸ªæ ¹å“ˆå¸Œï¼Œè€Œä¸ç”¨ä¸‹è½½æ•´ä¸ªäº¤æ˜“è®°å½•ã€‚

ç°åœ¨æ¥ç¡®è®¤ä¸€ä¸‹æ˜¯ä¸æ˜¯éƒ½å¼„å¯¹äº†ï¼š

```text
$ blockchain_go createblockchain -address Ivan
00000093450837f8b52b78c25f8163bb6137caf43ff4d9a01d1b731fa8ddcc8a

Done!
```

å¥½ï¼æˆ‘ä»¬æ¥æ”¶åˆ°äº†ç¬¬ä¸€ç¬”æŒ–å‘å¥–åŠ±ã€‚ä½†æ˜¯æ€ä¹ˆç¡®è®¤ä½™é¢å‘¢ï¼Ÿ

## æœªèŠ±è´¹äº¤æ˜“çš„å‡ºè´¦(Unspent Transaction Outputs)

æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ‰€æœ‰çš„æœªèŠ±è´¹äº¤æ˜“çš„å‡ºè´¦(UTXO)ã€‚æœªèŠ±è´¹(Unspent)æ„å‘³ç€è¿™ä¸ªå‡ºè´¦è¿˜æ²¡è¢«ä»»ä½•äº¤æ˜“æ‰€å¼•ç”¨ã€‚è¡¨ç¤ºçš„è¯åº”è¯¥æ˜¯è¿™æ ·ï¼š

1. tx0, output 1;
2. tx1, output 0;
3. tx3, output 0;
4. tx4, output 0.

å½“ç„¶å•¦ï¼Œå½“æˆ‘ä»¬ç¡®è®¤ä½™é¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦æ‰€æœ‰çš„è¿™äº›ï¼Œåªè¦æ‰¾èƒ½è¢«æˆ‘ä»¬çš„ key æ‰€è§£é”çš„é‚£äº›å°±å¯ä»¥äº†(ç°åœ¨æˆ‘ä»¬å¹¶æ²¡æœ‰å®ç° keysï¼Œæš‚æ—¶ä¼šç”¨ç”¨æˆ·è‡ªå®šä¹‰åœ°å€æ¥ä»£æ›¿)ã€‚é¦–å…ˆæ¥åœ¨å…¥è´¦å‡ºè´¦ä¸Šå®šä¹‰ä¸€ä¸‹åŠ é”å’Œè§£é”çš„æ–¹æ³•ï¼š

```go
func (in *TXInput) CanUnlockOutputWith(unlockingData string) bool {
    return in.ScriptSig == unlockingData
}

func (out *TXOutput) CanBeUnlockedWith(unlockingData string) bool {
    return out.ScriptPubKey == unlockingData
}
```

è¿™é‡Œæˆ‘ä»¬åªæ˜¯ç”¨**unlockingData**æ¯”è¾ƒä¸€ä¸‹ script å­—æ®µã€‚æœªæ¥çš„æ–‡ç« ä¸­ï¼Œè¿™ä¸€å—ä¼šå‡çº§ä¸€ä¸‹ï¼Œå¤§æ¦‚ä¼šåœ¨å®ç°äº†åŸºäºç”¨æˆ·ç§é’¥çš„åœ°å€ä¹‹åã€‚

ä¸‹ä¸€æ­¥ â€”â€” æ‰¾åˆ°åŒ…å«æœ‰æœªèŠ±è´¹å‡ºè´¦çš„äº¤æ˜“ â€”â€” å…¶å®æ¯”è¾ƒéš¾ï¼š

```go
func (bc *Blockchain) FindUnspentTransactions(address string) []Transaction {
  var unspentTXs []Transaction
  spentTXOs := make(map[string][]int)
  bci := bc.Iterator()

  for {
    block := bci.Next()

    for _, tx := range block.Transactions {
      txID := hex.EncodeToString(tx.ID)

    Outputs:
      for outIdx, out := range tx.Vout {
        // Was the output spent?
        if spentTXOs[txID] != nil {
          for _, spentOut := range spentTXOs[txID] {
            if spentOut == outIdx {
              continue Outputs
            }
          }
        }

        if out.CanBeUnlockedWith(address) {
          unspentTXs = append(unspentTXs, *tx)
        }
      }

      if tx.IsCoinbase() == false {
        for _, in := range tx.Vin {
          if in.CanUnlockOutputWith(address) {
            inTxID := hex.EncodeToString(in.Txid)
            spentTXOs[inTxID] = append(spentTXOs[inTxID], in.Vout)
          }
        }
      }
    }

    if len(block.PrevBlockHash) == 0 {
      break
    }
  }

  return unspentTXs
}
```

ç”±äºäº¤æ˜“ä¿¡æ¯è¢«å­˜å‚¨åœ¨åŒºå—ä¸­ï¼Œæˆ‘ä»¬åªèƒ½ç¡®è®¤åŒºå—é“¾ä¸Šçš„æ¯ä¸ªåŒºå—ã€‚ä»å…ˆä»å‡ºè´¦å¼€å§‹ï¼š

```go
if out.CanBeUnlockedWith(address) {
    unspentTXs = append(unspentTXs, tx)
}
```

å¦‚æœä¸€ç¬”å‡ºè´¦è¢«æˆ‘ä»¬æ‰€æœç´¢çš„æœªèŠ±è´¹äº¤æ˜“å‡ºè´¦çš„ç›¸åŒåœ°å€é”ä½äº†ã€‚é‚£ä¹ˆè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„å‡ºè´¦ã€‚ä¸è¿‡åœ¨è·å–ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜å¾—ç¡®è®¤è¿™ä¸ªå‡ºè´¦æ˜¯å¦å·²ç»è¢«å…¥è´¦æ‰€å¼•ç”¨äº†ï¼š

```go
if spentTXOs[txID] != nil {
    for _, spentOut := range spentTXOs[txID] {
        if spentOut == outIdx {
            continue Outputs
        }
    }
}
```

æˆ‘ä»¬è·³è¿‡äº†è¿™äº›è¢«å¼•ç”¨çš„å…¥è´¦(è¿™äº›å€¼è¢«ç§»åŠ¨åˆ°äº†å…¶ä»–çš„å‡ºè´¦ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½æŠŠå®ƒä»¬ç®—ä¸Š)ã€‚åœ¨ç¡®è®¤äº†æ‰€æœ‰è·å–åˆ°çš„ç”±æä¾›çš„åœ°å€(è¿™ä¸ä¼šæ³¢åŠåˆ°å¸åŸºäº¤æ˜“ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šè§£é”è¿™ä¸ªå‡ºè´¦)å¯ä»¥è§£é”çš„å‡ºè´¦ä¹‹åï¼š

```go
if tx.IsCoinbase() == false {
    for _, in := range tx.Vin {
        if in.CanUnlockOutputWith(address) {
            inTxID := hex.EncodeToString(in.Txid)
            spentTXOs[inTxID] = append(spentTXOs[inTxID], in.Vout)
        }
    }
}
```

è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«ç€æœªèŠ±è´¹çš„äº¤æ˜“åˆ—è¡¨ã€‚ä¸ºäº†è®¡ç®—ä½™é¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¦ä¸€ä¸ªå‡½æ•°ï¼Œäº¤æ˜“ä¿¡æ¯æ˜¯è¾“å…¥ï¼Œåªè¿”å›å‡ºè´¦ä¿¡æ¯ã€‚

```go
func (bc *Blockchain) FindUTXO(address string) []TXOutput {
       var UTXOs []TXOutput
       unspentTransactions := bc.FindUnspentTransactions(address)

       for _, tx := range unspentTransactions {
               for _, out := range tx.Vout {
                       if out.CanBeUnlockedWith(address) {
                               UTXOs = append(UTXOs, out)
                       }
               }
       }

       return UTXOs
}
```

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å®ç° **getbalance** å‘½ä»¤å•¦ï¼š

```go
func (cli *CLI) getBalance(address string) {
    bc := NewBlockchain(address)
    defer bc.db.Close()

    balance := 0
    UTXOs := bc.FindUTXO(address)

    for _, out := range UTXOs {
        balance += out.Value
    }

    fmt.Printf("Balance of '%s': %d\n", address, balance)
}
```

è´¦æˆ·ä½™é¢å°±æ˜¯æ‰€æœ‰çš„ç”±è´¦æˆ·åœ°å€é”å®šçš„æœªèŠ±è´¹äº¤æ˜“å‡ºè´¦çš„å€¼å¾—æ€»å’Œã€‚

åœ¨æŒ–æ˜äº†åˆ›å§‹åŒºå—ä¹‹åï¼Œæ¥ç¡®è®¤ä¸€ä¸‹ä½™é¢ï¼š

```go
$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 10
```

å“‡ï¼Œ æˆ‘ä»¬æœ‰äº†ç¬¬ä¸€æ¡¶é‡‘ã€‚

## å‘é€å¸

ç°åœ¨æˆ‘ä»¬æƒ³å‘é€ä¸€äº›å¸ç»™å…¶ä»–äººã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬è¦åˆ›å»ºä¸€ç¬”æ–°çš„äº¤æ˜“ï¼ŒæŠŠå®ƒæ”¾åˆ°åŒºå—é‡Œé¢ï¼Œç„¶åæŒ–æ˜åŒºå—ã€‚åˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬åªæ˜¯å®ç°äº†å¸åŸºäº¤æ˜“(è¿™æ˜¯äº¤æ˜“ä¸­çš„ä¸€ç§ç‰¹æ®Šç±»å‹)ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦æ™®é€šäº¤æ˜“äº†ï¼š

```go
func NewUTXOTransaction(from, to string, amount int, bc *Blockchain) *Transaction {
    var inputs []TXInput
    var outputs []TXOutput

    acc, validOutputs := bc.FindSpendableOutputs(from, amount)

    if acc < amount {
        log.Panic("ERROR: Not enough funds")
    }

    // Build a list of inputs
    for txid, outs := range validOutputs {
        txID, err := hex.DecodeString(txid)

        for _, out := range outs {
            input := TXInput{txID, out, from}
            inputs = append(inputs, input)
        }
    }

    // Build a list of outputs
    outputs = append(outputs, TXOutput{amount, to})
    if acc > amount {
        outputs = append(outputs, TXOutput{acc - amount, from}) // a change
    }

    tx := Transaction{nil, inputs, outputs}
    tx.SetID()

    return &tx
}
```

åœ¨åˆ›å»ºæ–°çš„è¾“å‡ºä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆæ‰¾åˆ°æ‰€æœ‰çš„æœªèŠ±è´¹å‡ºè´¦å¹¶ç¡®è®¤å®ƒä»¬å­˜äº†è¶³å¤Ÿçš„å¸ã€‚è¿™å°±æ˜¯ **FindSpendableOutputs** æ–¹æ³•è¦å¹²çš„äº‹æƒ…ã€‚ä¹‹åï¼Œå…¥è´¦æ‰€å¼•ç”¨çš„æ¯ä¸ªæ‰¾åˆ°çš„å‡ºè´¦å°±è¿™ä¹ˆè¢«åˆ›å»ºäº†å‡ºæ¥ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¾—åˆ›å»ºä¸¤ä¸ªå‡ºè´¦ï¼š

1. ä¸€ä¸ªæ˜¯è¢«æ¥å—è€…åœ°å€æ‰€é”å®šçš„ã€‚è¿™å°±æ˜¯çœŸæ˜¯çš„å¸è½¬æ¢çš„å¦ä¸€ä¸ªåœ°å€ã€‚
2. ä¸€ä¸ªæ˜¯è¢«å‘é€è€…åœ°å€æ‰€é”å®šçš„ã€‚è¿™æ˜¯æ‰¾é›¶ã€‚åªæœ‰å½“ä¸ºè¯è´¹çš„å‡ºè´¦å€¼è¦æ¯”æ‰€è¦æ±‚çš„æ–°äº¤æ˜“è¦å¤šçš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºã€‚è®°ä½ï¼Œå‡ºè´¦æ˜¯ä¸å¯è§çš„ã€‚

**FindSpendableOutputs** æ–¹æ³•æ˜¯åŸºäºæˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ **FindUnspentTransactions**æ–¹æ³•çš„ï¼š

```go
func (bc *Blockchain) FindSpendableOutputs(address string, amount int) (int, map[string][]int) {
    unspentOutputs := make(map[string][]int)
    unspentTXs := bc.FindUnspentTransactions(address)
    accumulated := 0

Work:
    for _, tx := range unspentTXs {
        txID := hex.EncodeToString(tx.ID)

        for outIdx, out := range tx.Vout {
            if out.CanBeUnlockedWith(address) && accumulated < amount {
                accumulated += out.Value
                unspentOutputs[txID] = append(unspentOutputs[txID], outIdx)

                if accumulated >= amount {
                    break Work
                }
            }
        }
    }

    return accumulated, unspentOutputs
}
```

è¿™ä¸ªæ–¹æ³•è¿­ä»£äº†æ‰€æœ‰çš„æœªèŠ±è´¹äº¤æ˜“å¹¶ç´¯è®¡äº†è¿™äº›å€¼ã€‚å½“ç´¯è®¡å€¼å¤§äºæˆ–ç­‰äºæˆ‘ä»¬æƒ³è¦äº¤æ˜“çš„é¢åº¦ï¼Œå®ƒå°±ä¼šåœä¸‹å¹¶è¿”å›ç´¯è®¡å€¼å’Œç”±äº¤æ˜“ ID æ‰€èšåˆçš„å‡ºè´¦ç´¢å¼•ã€‚æˆ‘ä»¬ä¸æƒ³è¦é‚£æ¯”æˆ‘ä»¬è¦èŠ±çš„æ›´å¤šçš„é’±ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹é€ ä¸€ä¸‹ **Blockchain.MineBlock** æ–¹æ³•ï¼š

```go
func (bc *Blockchain) MineBlock(transactions []*Transaction) {
    ...
    newBlock := NewBlock(transactions, lastHash)
    ...
}
```

æœ€åï¼Œå®ç°ä¸€ä¸‹ **send** å‘½ä»¤ï¼š

```go
func (cli *CLI) send(from, to string, amount int) {
    bc := NewBlockchain(from)
    defer bc.db.Close()

    tx := NewUTXOTransaction(from, to, amount, bc)
    bc.MineBlock([]*Transaction{tx})
    fmt.Println("Success!")
}
```

å‘é€å¸æ„å‘³ç€åˆ›å»ºäº†ä¸€ç¬”äº¤æ˜“ï¼Œè€Œä¸”æ·»åŠ åˆ°äº†åŒºå—é“¾ä¸­ï¼Œå¹¶å‘æ˜å‡ºäº†ä¸€ä¸ªæ–°çš„åŒºå—ã€‚ä½†æ¯”ç‰¹å¸ä¸ä¼šç«‹å³ å¤„ç†(æˆ‘ä»¬ä¹Ÿä¸ä¼š)ã€‚è€Œæ˜¯æŠŠæ‰€æœ‰æ–°çš„äº¤æ˜“ä¿¡æ¯æ¨é€åˆ°å†…å­˜æ± ä¸­ï¼Œå½“çŸ¿å·¥å‡†å¤‡å¥½äº†è¦å»æŒ–æ–°çš„åŒºå—ï¼Œå®ƒå°±ä¼šå¸¦ç€æ‰€æœ‰æ¥è‡ªäºå†…å­˜æ± ä¸­çš„äº¤æ˜“ä¿¡æ¯å¹¶åˆ›å»ºä¸€ä¸ªå€™é€‰åŒºå—ã€‚å½“åŒºå—è¢«æŒ–æ˜åˆ°å¹¶å¡å…¥äº¤æ˜“ä¿¡æ¯åˆ°åŒºå—é“¾çš„æ—¶å€™ï¼Œäº¤æ˜“åªä¼šè¢«ç¡®è®¤ä¸€æ¬¡ã€‚

æ¥ç¡®è®¤ä¸€ä¸‹å‘é€å¸æ˜¯ä¸æ˜¯å¯ä»¥ç”¨:

```text
$ blockchain_go send -from Ivan -to Pedro -amount 6
00000001b56d60f86f72ab2a59fadb197d767b97d4873732be505e0a65cc1e37

Success!

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 4

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 6
```

æ£’æ£’çš„ï¼Œç°åœ¨æˆ‘ä»¬åˆ›å»ºäº†æ›´å¤šçš„äº¤æ˜“ï¼Œå¹¶ç¡®è®¤äº†ä»å¤šä¸ªå‡ºè´¦å‘é€ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼š

```text
$ blockchain_go send -from Pedro -to Helen -amount 2
00000099938725eb2c7730844b3cd40209d46bce2c2af9d87c2b7611fe9d5bdf

Success!

$ blockchain_go send -from Ivan -to Helen -amount 2
000000a2edf94334b1d94f98d22d7e4c973261660397dc7340464f7959a7a9aa

Success!
```

ç°åœ¨ Helen çš„å¸è¢«é”åœ¨äº†ä¸¤ç¬”å‡ºè´¦å¿—å®ï¼Œä¸€ä¸ªæ¥è‡ªäº Pedroï¼Œå¦ä¸€ä¸ªæ¥è‡ªäº lvanï¼Œç°åœ¨æ¥æŠŠå®ƒå‘ç»™å…¶ä»–äººå§ï¼š

```text
$ blockchain_go send -from Helen -to Rachel -amount 3
000000c58136cffa669e767b8f881d16e2ede3974d71df43058baaf8c069f1a0

Success!

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 2

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 4

$ blockchain_go getbalance -address Helen
Balance of 'Helen': 1

$ blockchain_go getbalance -address Rachel
Balance of 'Rachel': 3
```

å¾ˆå¥½ï¼Œç°åœ¨æ¥çœ‹çœ‹ä¼šä¸ä¼šå¤±è´¥ï¼š

```text
$ blockchain_go send -from Pedro -to Ivan -amount 5
panic: ERROR: Not enough funds

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 4

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 2
```

## æœ€å

å“ˆå“ˆï¼Œè¿™ä¸æ˜¯å¾ˆç®€å•ï¼Œä½†ç°åœ¨æˆ‘ä»¬æœ‰äº†äº¤æ˜“ä¿¡æ¯äº†ã€‚ä¸è¿‡ç±»ä¼¼äºæ¯”ç‰¹å¸è¿™æ ·çš„åŠ å¯†è´§å¸çš„ä¸€äº›é‡ç‚¹ç‰¹æ€§ä»æœ‰ç¼ºå¤±ï¼š

1. åœ°å€ã€‚æˆ‘ä»¬ä»ç„¶æ²¡æœ‰çœŸå®çš„ï¼ŒåŸºäºç§é’¥çš„åœ°å€ã€‚
2. å¥–åŠ±ã€‚æŒ–å‘æ˜¯çœŸçš„æ— åˆ©å¯å›¾ã€‚
3. UTXO é›†ã€‚è·å–è´¦æˆ·ä½™é¢éœ€è¦æ£€æŸ¥æ•´ä¸ªåŒºå—é“¾ï¼Œåœ¨æœ‰å¤§é‡åŒºå—çš„æƒ…å†µä¸‹è¿™ä¼šèŠ±è´¹ç›¸å½“é•¿çš„æ—¶é—´ã€‚è€Œä¸”ï¼Œå¦‚æœæˆ‘ä»¬ä¹‹åæƒ³è¦éªŒè¯äº¤æ˜“ä¿¡æ¯çš„è¯ï¼Œä¼šèŠ±è´¹å¾ˆé•¿çš„æ—¶é—´ã€‚UTXO é›†å¸Œæœ›å»è§£å†³è¿™äº›é—®é¢˜ï¼Œè€Œä¸”è®©äº¤æ˜“æ“ä½œæ›´å¿«ã€‚
4. å†…å­˜æ± ã€‚è¿™æ˜¯äº¤æ˜“ä¿¡æ¯åœ¨æ‰“åŒ…è¿›åŒºå—é“¾ä¹‹å‰äº¤æ˜“ä¿¡æ¯æ‰€å¾…çš„åœ°æ–¹ã€‚åœ¨æˆ‘ä»¬å½“å‰çš„å®ç°ä¸­ï¼Œä¸€ä¸ªåŒºå—åªåŒ…å«ä¸€æ¡äº¤æ˜“ï¼Œè¿™æ ·æ•ˆç‡å¤ªä½äº†ã€‚

* [åŸºæœ¬åŸå‹](/posts/building-blockchain-in-go-part-1-basic-prototype)
* [å·¥ä½œé‡è¯æ˜](/posts/building-blockchain-in-go-part-2-proof-of-work)
* [æŒä¹…åŒ–ä¸å‘½ä»¤è¡Œ](/posts/building-blockchain-in-go-part-3-persistence-and-cli)
* [äº¤æ˜“ 1](/posts/build-blockchain-in-go-part-4-transactions-1)
* [åœ°å€](/posts/building-blockchain-in-go-part-5-addresses)
* [äº¤æ˜“ 2](/posts/building-blockchain-in-go-part-6-transactions-2)
* [ç½‘ç»œ](/posts/building-blockchain-go-part-7-network)

